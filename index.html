<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ® Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠ Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; direction: rtl; background:#fafafa; color:#333; }
    nav { background:#1976d2; padding:12px; text-align:center; position:sticky; top:0; z-index: 1000;}
    nav a { color:white; margin:0 8px; text-decoration:none; font-size:1rem; }
    nav a:hover, nav a.active { text-decoration:underline; }
    section { display:none; padding:20px; max-width:480px; margin:20px auto; background:white; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    section.active { display:block; }
    h2 { margin-top:0; }
    button { padding:8px 16px; margin:8px 4px; font-size:1rem; cursor:pointer; border:none; border-radius:6px; background:#0288d1; color:white; transition:background .2s; }
    button:hover { background:#026aa7; }
    button:disabled { background:#ccc; cursor:not-allowed; }
    .status, .result, .message, #auth-status { margin:15px 0; font-size:1.1rem; min-height: 1.2em; }
    .board { display:grid; grid-template-columns:repeat(3,100px); gap:8px; justify-content:center; margin:15px auto; }
    .cell { width:100px; height:100px; border:2px solid #999; display:flex; align-items:center; justify-content:center; font-size:2.5rem; background:#fdfdfd; transition:background .2s; cursor:pointer; }
    .cell:hover { background:#f0f0f0; }
    .gamebox { text-align:center; margin:15px auto; }
    .timebox { font-size:2rem; margin:15px; }
    .cards { display:grid; grid-template-columns:repeat(4,80px); gap:10px; justify-content:center; margin-bottom: 15px; }
    .card { width:80px; height:80px; background:#eee; display:flex; align-items:center; justify-content:center; font-size:1.6rem; cursor:pointer; border-radius: 4px; border: 1px solid #ccc; }
    .card.revealed { background:#fff; cursor:default; }
    .card.matched { background: #c8e6c9; }
    .input-group { margin: 10px 0; }
    .input-group label { display: block; margin-bottom: 5px; font-weight: bold;}
    .input-group input[type="text"], .input-group input[type="number"], .input-group input[type="email"], .input-group input[type="password"] {
      padding: 8px; border-radius: 4px; border: 1px solid #ccc; margin-left: 5px; font-size: 1rem; width: calc(100% - 22px); box-sizing: border-box;
    }
    .question-area { margin-bottom:10px; font-size: 1.2rem; font-weight: bold; }
    .text-to-type { padding: 10px; border: 1px dashed #ccc; margin: 10px 0; font-size: 1.3rem; background-color: #f9f9f9; }
    #auth-status { font-weight: bold; color: #1976d2; }
    .auth-form-container { margin-bottom: 15px; }
    .auth-container button { width: calc(33.333% - 8px); }
  </style>
</head>
<body>

  <nav>
    <a href="#login" id="nav-login-link">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
    <a href="#xo">XO</a>
    <a href="#rps">RPS</a>
    <a href="#click">Target</a>
    <a href="#react">Reaction</a>
    <a href="#dice">Dice</a>
    <a href="#memory">Memory</a>
    <a href="#math">Math</a>
    <a href="#guessnum">GuessNum</a>
    <a href="#bigsmall">BigSmall</a>
    <a href="#typing">Typing</a>
  </nav>

  <section id="login">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
    <div class="auth-container">
        <div class="auth-form-container">
            <div class="input-group" id="email-group">
                <label for="login-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                <input type="email" id="login-email" required />
            </div>
            <div class="input-group" id="password-group">
                <label for="login-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø­Ø±ÙˆÙ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„):</label>
                <input type="password" id="login-password" required />
            </div>
        </div>
        <button id="btn-signup">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
        <button id="btn-login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        <button id="btn-logout" style="display:none;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
    <div id="auth-status">ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯.</div>
  </section>

  <section id="xo">
    <h2>âŒâ­• XO</h2>
    <div class="board"></div>
    <div class="status">Ø§Ù„Ø¯ÙˆØ±: âŒ</div>
    <button id="xo-restart">Ø¥Ø¹Ø§Ø¯Ø© XO</button>
  </section>

  <section id="rps">
    <h2>âœŠğŸ–âœŒ Ø­Ø¬Ø± ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ</h2>
    <div class="gamebox">
      <button data-choice="ğŸª¨">ğŸª¨</button>
      <button data-choice="ğŸ“„">ğŸ“„</button>
      <button data-choice="âœ‚ï¸">âœ‚ï¸</button>
    </div>
    <div class="result">Ø§Ø®ØªØ± Ù„Ø¨Ø¯Ø¡!</div>
  </section>

  <section id="click">
    <h2>ğŸ¯ Ø§ØµØ·ÙŠØ§Ø¯ Ø§Ù„Ù‡Ø¯Ù</h2>
    <div class="gamebox"><button id="click-start">Ø§Ø¨Ø¯Ø£</button></div>
    <div id="click-target-area" class="gamebox"></div>
    <div class="status">Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£"</div>
  </section>

  <section id="react">
    <h2>âŒ› Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±Ø¹Ø© Ø§Ù„Ø¶ØºØ·</h2>
    <div class="gamebox"><button id="react-start">Ø§Ø¨Ø¯Ø£</button></div>
    <div class="timebox">--</div>
  </section>

  <section id="dice">
    <h2>ğŸ² Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯</h2>
    <div class="gamebox"><button id="dice-roll">Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯</button></div>
    <div class="result">--</div>
  </section>

  <section id="memory">
    <h2>ğŸ§  Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>
    <div class="cards"></div>
    <div class="status">Ø§Ø¶ØºØ· Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ø¨Ø¯Ø¡</div>
    <div class="gamebox"><button id="memory-restart">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button></div>
  </section>

  <section id="math">
    <h2>ğŸ§® Ø¬Ù…Ø¹ Ø£Ø±Ù‚Ø§Ù… Ø¨Ø³Ø±Ø¹Ø©</h2>
    <div class="gamebox"><button id="math-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button></div>
    <div class="question-area" style="display:none;"></div>
    <div class="input-group" style="display:none;">
      <input type="number" id="math-answer" placeholder="Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ"/>
      <button id="math-submit">ØªØ­Ù‚Ù‚</button>
    </div>
    <div class="result">--</div>
  </section>

  <section id="guessnum">
    <h2>ğŸ”¢ ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø±Ù‚Ù…</h2>
    <div class="gamebox"><button id="guessnum-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button></div>
    <div class="input-group" style="display:none;">
      <input type="number" id="guessnum-input" placeholder="Ø®Ù…Ù† Ø¨ÙŠÙ† 1 Ùˆ100"/>
      <button id="guessnum-submit">Ø®Ù…Ù†</button>
    </div>
    <div class="result">--</div>
    <div class="message"></div>
  </section>

  <section id="bigsmall">
    <h2>ğŸ“ Ù…Ù† Ø§Ù„Ø£ÙƒØ¨Ø±ØŸ</h2>
    <div class="gamebox"><button id="bigsmall-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button></div>
    <div class="question-area" style="display:none;"></div>
    <div class="input-group" style="display:none;">
      <input type="number" id="bigsmall-answer" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø£ÙƒØ¨Ø±"/>
      <button id="bigsmall-submit">ØªØ­Ù‚Ù‚</button>
    </div>
    <div class="result">--</div>
  </section>

  <section id="typing">
    <h2>âŒ¨ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©</h2>
    <div class="gamebox"><button id="typing-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button></div>
    <div class="text-to-type" style="display:none;"></div>
    <div class="input-group" style="display:none;">
      <input type="text" id="typing-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§"/>
      <button id="typing-submit">ØªØ­Ù‚Ù‚</button>
    </div>
    <div class="status">--</div>
  </section>

  <audio id="snd-click" src="https://actions.google.com/sounds/v1/alarms/button_click.ogg"></audio>
  <audio id="snd-win" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="snd-lose" src="https://actions.google.com/sounds/v1/cartoon/cartoon_cowbell.ogg"></audio>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDLzpa2HYzJZdZvY_YuviKZ6Zg0FhWTfJw",
      authDomain: "my-site-cdd00.firebaseapp.com",
      projectId: "my-site-cdd00",
      storageBucket: "my-site-cdd00.firebasestorage.app",
      messagingSenderId: "514123463555",
      appId: "1:514123463555:web:8499c5bde152537a3dd4b6",
      measurementId: "G-3Y7SYCE0NZ"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    document.addEventListener('DOMContentLoaded', () => {
      const playSound = (soundId) => { const sound = document.getElementById(soundId); if (sound) { sound.currentTime = 0; sound.play().catch(e => console.error("Error playing sound:", e)); } };
      const getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
      const updateElementText = (element, text) => { if (element) element.textContent = text; };
      const showHideElement = (element, show, displayType = 'block') => { if (element) element.style.display = show ? displayType : 'none'; }
      const disableElement = (element, disabled) => { if(element) element.disabled = disabled; }

      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('nav a');
      const navLoginLink = document.querySelector('#nav-login-link');

      const showSection = (targetId) => {
        sections.forEach(s => s.classList.toggle('active', s.id === targetId));
        navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === `#${targetId}`));
        playSound('snd-click');
      };

      navLinks.forEach(a => a.addEventListener('click', e => {
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        showSection(id);
      }));

      const loginSectionEl = document.querySelector('#login');
      const loginEmailInput = loginSectionEl.querySelector('#login-email');
      const loginPasswordInput = loginSectionEl.querySelector('#login-password');
      const btnSignup = loginSectionEl.querySelector('#btn-signup');
      const btnLogin = loginSectionEl.querySelector('#btn-login');
      const btnLogout = loginSectionEl.querySelector('#btn-logout');
      const authStatusDiv = loginSectionEl.querySelector('#auth-status');
      const emailGroup = loginSectionEl.querySelector('#email-group');
      const passwordGroup = loginSectionEl.querySelector('#password-group');

      btnSignup.addEventListener('click', () => {
        const email = loginEmailInput.value;
        const password = loginPasswordInput.value;
        if (!email || !password) { updateElementText(authStatusDiv, "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±."); return; }
        if (password.length < 6) { updateElementText(authStatusDiv, "ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± 6 Ø­Ø±ÙˆÙ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„."); return; }
        updateElementText(authStatusDiv, 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...');
        disableElement(btnSignup, true); disableElement(btnLogin, true);
        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => { updateElementText(authStatusDiv, `ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ù…Ø±Ø­Ø¨Ø§Ù‹ ${userCredential.user.email}`); loginEmailInput.value = ''; loginPasswordInput.value = ''; })
          .catch((error) => { updateElementText(authStatusDiv, `Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨: ${error.message}`); console.error('Signup error:', error.code, error.message); })
          .finally(() => { disableElement(btnSignup, false); disableElement(btnLogin, false); });
      });

      btnLogin.addEventListener('click', () => {
        const email = loginEmailInput.value;
        const password = loginPasswordInput.value;
        if (!email || !password) { updateElementText(authStatusDiv, "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±."); return; }
        updateElementText(authStatusDiv, 'Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...');
        disableElement(btnSignup, true); disableElement(btnLogin, true);
        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => { updateElementText(authStatusDiv, `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ù…Ø±Ø­Ø¨Ø§Ù‹ ${userCredential.user.email}`); })
          .catch((error) => { updateElementText(authStatusDiv, `Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${error.message}`); console.error('Login error:', error.code, error.message); })
          .finally(() => { disableElement(btnSignup, false); disableElement(btnLogin, false); });
      });

      btnLogout.addEventListener('click', () => {
        auth.signOut().catch((error) => { updateElementText(authStatusDiv, `Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬: ${error.message}`); console.error('Logout error:', error); });
      });

      auth.onAuthStateChanged(user => {
        if (user) {
          updateElementText(authStatusDiv, `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ, ${user.email}`);
          updateElementText(navLoginLink, 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
          navLoginLink.onclick = (e) => { e.preventDefault(); btnLogout.click(); showSection('login'); };
          showHideElement(btnLogout, true, 'inline-block');
          showHideElement(btnLogin, false);
          showHideElement(btnSignup, false);
          showHideElement(emailGroup, false);
          showHideElement(passwordGroup, false);
        } else {
          updateElementText(authStatusDiv, 'Ø£Ù†Øª ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„. Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯.');
          updateElementText(navLoginLink, 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
          navLoginLink.onclick = (e) => { e.preventDefault(); showSection('login'); };
          showHideElement(btnLogout, false);
          showHideElement(btnLogin, true, 'inline-block');
          showHideElement(btnSignup, true, 'inline-block');
          showHideElement(emailGroup, true);
          showHideElement(passwordGroup, true);
          loginEmailInput.value = '';
          loginPasswordInput.value = '';
        }
      });

      const initXOGame = () => {
        const section = document.querySelector('#xo'), boardElement = section.querySelector('.board'), statusElement = section.querySelector('.status'), restartButton = section.querySelector('#xo-restart');
        let board = Array(9).fill(''), currentPlayer = 'âŒ', gameActive = true;
        const winningPatterns = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        const checkWin = () => { for (const p of winningPatterns) { const [a,b,c] = p; if (board[a] && board[a]===board[b] && board[a]===board[c]) return board[a];} return null; };
        const checkDraw = () => !board.includes('');
        const handleClick = (index) => {
          if (!gameActive || board[index]) return;
          board[index] = currentPlayer; boardElement.children[index].textContent = currentPlayer; playSound('snd-click');
          const winner = checkWin();
          if (winner) { updateElementText(statusElement, `ÙØ§Ø² ${winner}`); playSound('snd-win'); gameActive = false; }
          else if (checkDraw()) { updateElementText(statusElement, 'ØªØ¹Ø§Ø¯Ù„'); playSound('snd-click'); gameActive = false; }
          else { currentPlayer = currentPlayer === 'âŒ' ? 'â­•' : 'âŒ'; updateElementText(statusElement, `Ø§Ù„Ø¯ÙˆØ±: ${currentPlayer}`); }
        };
        const resetGame = () => { board.fill(''); currentPlayer = 'âŒ'; gameActive = true; updateElementText(statusElement, 'Ø§Ù„Ø¯ÙˆØ±: âŒ'); Array.from(boardElement.children).forEach(c=>c.textContent=''); playSound('snd-click'); };
        boardElement.innerHTML = Array(9).fill().map((_,i) => `<div class="cell" data-index="${i}"></div>`).join('');
        Array.from(boardElement.children).forEach((cell, i) => cell.addEventListener('click', () => handleClick(i)));
        restartButton.addEventListener('click', resetGame); resetGame();
      };

      const initRPSGame = () => {
        const section = document.querySelector('#rps'), resultElement = section.querySelector('.result'), choiceButtons = section.querySelectorAll('.gamebox button'), options = ['ğŸª¨','ğŸ“„','âœ‚ï¸'];
        choiceButtons.forEach(button => button.addEventListener('click', () => {
          const pC = button.dataset.choice, cC = options[getRandomInt(0,2)]; let msg='ØªØ¹Ø§Ø¯Ù„';
          if ((pC==='ğŸª¨'&&cC==='âœ‚ï¸')||(pC==='ğŸ“„'&&cC==='ğŸª¨')||(pC==='âœ‚ï¸'&&cC==='ğŸ“„')) msg='ÙØ²Øª'; else if(pC!==cC)msg='Ø®Ø³Ø±Øª';
          updateElementText(resultElement, `${msg}! Ø£Ù†Øª:${pC} Ø§Ù„ÙƒÙˆÙ…Ø¨ÙŠÙˆØªØ±:${cC}`); playSound(msg==='ÙØ²Øª'?'snd-win':msg==='Ø®Ø³Ø±Øª'?'snd-lose':'snd-click');
        }));
      };

      const initClickTargetGame = () => {
        const section = document.querySelector('#click'), startButton = section.querySelector('#click-start'), statusElement = section.querySelector('.status'), targetArea = section.querySelector('#click-target-area'); let gtid = null;
        startButton.addEventListener('click', () => {
          disableElement(startButton,true); updateElementText(statusElement,'Ø§Ù†ØªØ¸Ø±...'); targetArea.innerHTML=''; if(gtid)clearTimeout(gtid);
          gtid = setTimeout(() => {
            const sT = Date.now(), tB = document.createElement('button'); tB.textContent='ğŸ¯'; tB.style.fontSize=`${getRandomInt(2,4)}rem`; tB.style.position='relative'; tB.style.top=`${getRandomInt(-30,30)}px`; tB.style.left=`${getRandomInt(-50,50)}px`;
            tB.onclick=()=>{ const rT=Date.now()-sT; updateElementText(statusElement,`Ø²Ù…Ù†Ùƒ: ${rT} Ù…Ù„Ù„ÙŠ. Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£"`); playSound('snd-win'); tB.remove(); disableElement(startButton,false); };
            targetArea.appendChild(tB); updateElementText(statusElement,'Ø§Ø¶ØºØ· Ø§Ù„Ù‡Ø¯Ù!');
          }, getRandomInt(1000,3000));
        });
      };

      const initReactionTestGame = () => {
        const section = document.querySelector('#react'), startButton = section.querySelector('#react-start'), timeBox = section.querySelector('.timebox');
        let sT = 0, gtid = null, canClick = false;
        const triggerPress = () => { updateElementText(startButton,'Ø§Ø¶ØºØ· Ø§Ù„Ø¢Ù†!'); startButton.style.backgroundColor='#4CAF50'; sT=Date.now(); disableElement(startButton,false); canClick=true; };
        const handleReaction = () => {
          if (!canClick && sT === 0) { updateElementText(timeBox,"Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±!"); playSound('snd-lose'); clearTimeout(gtid); disableElement(startButton,false); updateElementText(startButton,"Ø§Ø¨Ø¯Ø£"); startButton.style.backgroundColor=''; return; }
          if (!canClick) return;
          const rT = Date.now()-sT; updateElementText(timeBox,`${rT} Ù…Ù„Ù„ÙŠ`); playSound('snd-win'); updateElementText(startButton,'Ø§Ø¨Ø¯Ø£'); startButton.style.backgroundColor=''; sT=0; canClick=false; disableElement(startButton,false);
        };
        const startGame = () => {
          disableElement(startButton,true); updateElementText(timeBox,'Ø§Ù†ØªØ¸Ø±...'); updateElementText(startButton,'Ø§Ù†ØªØ¸Ø±...'); startButton.style.backgroundColor='#f44336'; sT=0; canClick=false; if(gtid)clearTimeout(gtid);
          gtid = setTimeout(triggerPress, getRandomInt(1500,4000));
        };
        startButton.addEventListener('click', () => { if(canClick || sT !==0) {handleReaction();} else {startGame();} });
      };

      const initDiceGame = () => {
        const section = document.querySelector('#dice'), rollButton = section.querySelector('#dice-roll'), resultElement = section.querySelector('.result');
        rollButton.addEventListener('click', () => { const roll = getRandomInt(1,6); updateElementText(resultElement,`ğŸ² Ø·Ù„Ø¹Øª: ${roll}`); playSound('snd-click'); });
      };

      const initMemoryGame = () => {
        const section=document.querySelector('#memory'), cardsContainer=section.querySelector('.cards'), statusElement=section.querySelector('.status'), restartButton=section.querySelector('#memory-restart');
        const cardPool=['ğŸ','ğŸŒ','ğŸ‡','ğŸ‰','ğŸ“','ğŸ’','ğŸ‘','ğŸ']; let vals=[], cards=[], selIdxs=[], matchedPairs=0, lock=false;
        const shuffle=(arr)=>{for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}};
        const createBoard=()=>{
          vals=[...cardPool,...cardPool]; shuffle(vals); cardsContainer.innerHTML=''; cards=[]; selIdxs=[]; matchedPairs=0; lock=false; updateElementText(statusElement,'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©!');
          vals.forEach((val,idx)=>{ const cardEl=document.createElement('div'); cardEl.classList.add('card'); cardEl.dataset.index=idx; cardEl.addEventListener('click',onCardClick); cardsContainer.appendChild(cardEl); cards.push({el:cardEl,val:val,rev:false,match:false,idx:idx});});
        };
        const onCardClick=(e)=>{
          if(lock)return; const cIdx=parseInt(e.target.dataset.index), cCard=cards[cIdx];
          if(cCard.rev||cCard.match||selIdxs.length===2)return;
          cCard.el.textContent=cCard.val; cCard.el.classList.add('revealed'); cCard.rev=true; selIdxs.push(cIdx); playSound('snd-click');
          if(selIdxs.length===2){ lock=true; setTimeout(checkMatch,700); }
        };
        const checkMatch=()=>{
          const [idx1,idx2]=selIdxs, card1=cards[idx1], card2=cards[idx2];
          if(card1.val===card2.val){ card1.match=true;card2.match=true;card1.el.classList.add('matched');card2.el.classList.add('matched');matchedPairs++;playSound('snd-win');if(matchedPairs===cardPool.length)updateElementText(statusElement,'ğŸ‰ Ø§Ù†ØªÙ‡ÙŠØª!');}
          else{card1.el.textContent='';card1.el.classList.remove('revealed');card1.rev=false;card2.el.textContent='';card2.el.classList.remove('revealed');card2.rev=false;playSound('snd-lose');}
          selIdxs=[]; lock=false;
        };
        restartButton.addEventListener('click',createBoard); createBoard();
      };

      const initMathGame = () => {
        const section=document.querySelector('#math'), startBtn=section.querySelector('#math-start'), qArea=section.querySelector('.question-area'), iGroup=section.querySelector('.input-group'), ansIn=section.querySelector('#math-answer'), subBtn=section.querySelector('#math-submit'), resEl=section.querySelector('.result');
        let curAns=0;
        const genQ=()=>{ const n1=getRandomInt(1,50),n2=getRandomInt(1,50);curAns=n1+n2;updateElementText(qArea,`Ø§Ø­Ø³Ø¨: ${n1} + ${n2} = ØŸ`);ansIn.value='';ansIn.focus();updateElementText(resEl,'--');showHideElement(qArea,true);showHideElement(iGroup,true);disableElement(startBtn,true);};
        const checkAns=()=>{ const uAns=parseInt(ansIn.value); if(isNaN(uAns)){updateElementText(resEl,'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…');return;} if(uAns===curAns){updateElementText(resEl,'âœ… ØµØ­ÙŠØ­!');playSound('snd-win');}else{updateElementText(resEl,`âŒ Ø®Ø·Ø£... Ø§Ù„ØµØ­ÙŠØ­: ${curAns}`);playSound('snd-lose');} disableElement(startBtn,false);showHideElement(qArea,false);showHideElement(iGroup,false);};
        startBtn.addEventListener('click',genQ); subBtn.addEventListener('click',checkAns); ansIn.addEventListener('keypress',(e)=>{if(e.key==='Enter')checkAns();});
      };

      const initGuessNumGame = () => {
        const section=document.querySelector('#guessnum'), startBtn=section.querySelector('#guessnum-start'), iGroup=section.querySelector('.input-group'), gIn=section.querySelector('#guessnum-input'), subBtn=section.querySelector('#guessnum-submit'), resEl=section.querySelector('.result'), msgEl=section.querySelector('.message');
        let target=0, tries=0;
        const startGame=()=>{target=getRandomInt(1,100);tries=0;updateElementText(resEl,'Ø®Ù…Ù† Ø¨ÙŠÙ† 1 Ùˆ100.');updateElementText(msgEl,'');gIn.value='';showHideElement(iGroup,true);gIn.focus();disableElement(startBtn,true);disableElement(subBtn,false);};
        const checkGuess=()=>{ const uGuess=parseInt(gIn.value); if(isNaN(uGuess)||uGuess<1||uGuess>100){updateElementText(msgEl,'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ø¨ÙŠÙ† 1 Ùˆ100');return;} tries++; if(uGuess===target){updateElementText(resEl,`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø®Ù…Ù†ØªÙ‡ Ø¨Ù€ ${tries} Ù…Ø­Ø§ÙˆÙ„Ø§Øª`);updateElementText(msgEl,'');playSound('snd-win');disableElement(startBtn,false);disableElement(subBtn,true);showHideElement(iGroup,false);}else if(uGuess<target){updateElementText(msgEl,'â¬†ï¸ Ø£Ø¹Ù„Ù‰!');playSound('snd-click');}else{updateElementText(msgEl,'â¬‡ï¸ Ø£Ù‚Ù„!');playSound('snd-click');} gIn.value='';gIn.focus();};
        startBtn.addEventListener('click',startGame); subBtn.addEventListener('click',checkGuess); gIn.addEventListener('keypress',(e)=>{if(e.key==='Enter')checkGuess();});
      };

      const initBigSmallGame = () => {
        const section=document.querySelector('#bigsmall'), startBtn=section.querySelector('#bigsmall-start'), qArea=section.querySelector('.question-area'), iGroup=section.querySelector('.input-group'), ansIn=section.querySelector('#bigsmall-answer'), subBtn=section.querySelector('#bigsmall-submit'), resEl=section.querySelector('.result');
        let corAns=0;
        const genChal=()=>{ const n1=getRandomInt(1,100);let n2=getRandomInt(1,100);while(n2===n1){n2=getRandomInt(1,100);}corAns=Math.max(n1,n2);updateElementText(qArea,`Ù…Ù† Ø§Ù„Ø£ÙƒØ¨Ø±ØŸ ${n1} Ø£Ùˆ ${n2}ØŸ`);ansIn.value='';updateElementText(resEl,'--');showHideElement(qArea,true);showHideElement(iGroup,true);ansIn.focus();disableElement(startBtn,true);};
        const checkAns=()=>{ const uAns=parseInt(ansIn.value); if(isNaN(uAns)){updateElementText(resEl,'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…');return;} if(uAns===corAns){updateElementText(resEl,'âœ… ØµØ­!');playSound('snd-win');}else{updateElementText(resEl,`âŒ ØºÙ„Ø·... Ø§Ù„ØµØ­ÙŠØ­: ${corAns}`);playSound('snd-lose');} disableElement(startBtn,false);showHideElement(qArea,false);showHideElement(iGroup,false);};
        startBtn.addEventListener('click',genChal); subBtn.addEventListener('click',checkAns); ansIn.addEventListener('keypress',(e)=>{if(e.key==='Enter')checkAns();});
      };

      const initTypingTestGame = () => {
        const section=document.querySelector('#typing'), startBtn=section.querySelector('#typing-start'), txtEl=section.querySelector('.text-to-type'), iGroup=section.querySelector('.input-group'), typIn=section.querySelector('#typing-input'), subBtn=section.querySelector('#typing-submit'), statEl=section.querySelector('.status');
        const texts=['Ù…ÙØªØ§Ø­','Ø¨Ø±Ù…Ø¬Ø©','ØªØ­Ø¯ÙŠ','Ø§Ù†Ø·Ù„Ø§Ù‚','Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª','Ù…ÙˆÙ‚Ø¹','Ù„Ø¹Ø¨Ø©','Ø­Ø§Ø³ÙˆØ¨','Ø§Ù†ØªØ±Ù†Øª','Ù…Ø±Ø­Ø¨Ø§Ù‹']; let curTxt='', sT=0;
        const startTest=()=>{curTxt=texts[getRandomInt(0,texts.length-1)];updateElementText(txtEl,`Ø£ÙƒØªØ¨: "${curTxt}"`);typIn.value='';updateElementText(statEl,'Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø©...');showHideElement(txtEl,true);showHideElement(iGroup,true);disableElement(startBtn,true);disableElement(subBtn,false);typIn.focus();sT=Date.now();};
        const checkTyping=()=>{ const typed=typIn.value, tTaken=Date.now()-sT; if(typed===curTxt){updateElementText(statEl,`ğŸ‰ Ù…Ø¶Ø¨ÙˆØ·! ÙˆÙ‚ØªÙƒ: ${tTaken} Ù…Ù„Ù„ÙŠ`);playSound('snd-win');}else{updateElementText(statEl,`âŒ Ø®Ø·Ø£! ÙƒØ§Ù† Ø§Ù„Ù…ÙØ±ÙˆØ¶: "${curTxt}". ÙƒØªØ¨Øª: "${typed}"`);playSound('snd-lose');} disableElement(startBtn,false);disableElement(subBtn,true);showHideElement(txtEl,false);showHideElement(iGroup,false);};
        startBtn.addEventListener('click',startTest); subBtn.addEventListener('click',checkTyping); typIn.addEventListener('keypress',(e)=>{if(e.key==='Enter')checkTyping();});
      };

      initXOGame(); initRPSGame(); initClickTargetGame(); initReactionTestGame(); initDiceGame(); initMemoryGame(); initMathGame(); initGuessNumGame(); initBigSmallGame(); initTypingTestGame();

      if (!auth.currentUser && navLinks.length > 0) {
        showSection('login');
        if(navLoginLink) navLoginLink.classList.add('active');
      } else if (auth.currentUser && sections.length > 1) {
         showSection(sections[1].id); // Show first game if logged in and games exist
      } else if (navLinks.length > 0) {
        showSection('login'); // Fallback to login
         if(navLoginLink) navLoginLink.classList.add('active');
      }
    });
  </script>
</body>
</html>
