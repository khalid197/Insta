<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>🎮 موقع الألعاب</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;500;600;700;800;900&display=swap");
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }
    body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: url("https://i.pinimg.com/originals/d7/b9/0c/d7b90cc80898e8823455a127945719af.jpg") no-repeat; background-size: cover; background-position: center; overflow-y: auto; position: relative; /* For sidebar positioning */
    }

    /* --- Sidebar Styles --- */
    .sidebar-toggle {
        position: fixed;
        top: 15px;
        right: 20px; /* Changed from left to right for LTR toggle on RTL page */
        font-size: 2.2rem;
        color: white;
        background-color: #002b4d;
        border: none;
        padding: 5px 10px;
        border-radius: 8px;
        cursor: pointer;
        z-index: 1002; /* Above sidebar overlay */
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .sidebar-toggle:focus { outline: none; }

    .sidebar {
        height: 100%;
        width: 0; /* Initially hidden */
        position: fixed;
        z-index: 1001;
        top: 0;
        right: 0; /* Changed from left to right */
        background-color: #00233a; /* Slightly darker than nav */
        overflow-x: hidden;
        transition: 0.35s ease-out;
        padding-top: 70px; /* Space for toggle button or header */
        direction: rtl;
        box-shadow: -5px 0 15px rgba(0,0,0,0.2); /* Shadow on the left */
    }
    .sidebar.open {
        width: 260px; /* Width when open */
    }
    .sidebar a {
        padding: 12px 15px 12px 30px; /* Adjusted padding for RTL */
        text-decoration: none;
        font-size: 1.15rem;
        color: #b0bec5; /* Lighter color for links */
        display: block;
        transition: 0.2s;
        border-bottom: 1px solid #002b4d; /* Separator */
    }
    .sidebar a:last-child {
        border-bottom: none;
    }
    .sidebar a:hover, .sidebar a.active-nav-link {
        color: #fff;
        background-color: #003B73;
        font-weight: bold;
    }
    .sidebar .sidebar-close-btn {
        position: absolute;
        top: 15px;
        left: 25px; /* Changed from right to left */
        font-size: 2rem;
        color: #b0bec5;
        cursor: pointer;
    }
     .sidebar .sidebar-close-btn:hover {
        color: #fff;
     }

    #admin-button-sidebar {
        background-color: rgba(220, 53, 69, 0.7);
        color: white !important; /* Important to override other styles */
    }
    #admin-button-sidebar:hover {
         background-color: #dc3545;
    }


    /* --- General Styles (some might be adjusted) --- */
    .wrapper { margin-top: 80px; width: 420px; background-color: transparent; border: 2px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(15px); box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); color: #fff; border-radius: 16px; padding: 20px 30px; direction: rtl; }
    .wrapper h1 { font-size: 30px; text-align: center; margin-bottom:20px;}
    .wrapper .input-box { width: 100%; height: 50px; position: relative; margin: 30px 0; }
    .input-box input { width: 100%; height: 100%; background: transparent; border: none; outline: none; border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 40px; font-size: 16px; color: #fff; padding: 20px 45px 20px 20px; text-align: right; direction: rtl; }
    .input-box input::placeholder { color: #fff; text-align: right; }
    .input-box i { position: absolute; top: 50%; transform: translateY(-50%); font-size: 20px; left: 20px; }
    .wrapper .remember-forgot { display: flex; justify-content: space-between; font-size: 14px; margin: -15px 0 15px; direction: rtl; }
    .remember-forgot label input { accent-color: #fff; margin-left: 3px; }
    .remember-forgot a { color: #fff; text-decoration: none; }
    .remember-forgot a:hover { text-decoration: underline; }
    .wrapper .btn { width: 100%; height: 45px; background: #fff; border: none; outline: none; border-radius: 40px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); cursor: pointer; font-size: 16px; color: #333; font-weight: 600; margin-top: 15px; display: flex; align-items: center; justify-content: center;}
    .wrapper .btn:disabled { background: #aaa; color: #666; cursor: not-allowed; }
    .wrapper .register-link { text-align: center; font-size: 14px; margin: 20px 0 15px; }
    .wrapper .register-link p a { color: #fff; text-decoration: none; font-weight: 600; }
    .wrapper .register-link p a:hover { text-decoration: underline; }

    #auth-status { margin-top:10px; padding: 8px; border-radius: 8px; font-weight: 500; min-height: 1.5em; text-align: center; color: #fff; font-size: 0.9em;}
    #auth-status.success { background-color: rgba(40, 167, 69, 0.3); border: 1px solid rgba(40, 167, 69, 0.6); }
    #auth-status.error { background-color: rgba(220, 53, 69, 0.3); border: 1px solid rgba(220, 53, 69, 0.6); }
    #auth-status.info { background-color: rgba(23, 162, 184, 0.3); border: 1px solid rgba(23, 162, 184, 0.6); }
    
    /* Nav is now just the toggle button, so we can hide the old nav */
    nav#main-nav { display: none; } 
    
    section {
      display: none; 
      padding: 20px; 
      max-width: 600px;
      margin: 20px auto; 
      margin-top: 80px; 
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      direction: rtl;
    }
    section.active { display:block !important; } 

    section#login.active, section#game-launcher.active { 
        background: transparent; 
        box-shadow: none; 
        border: none; 
        padding: 0;
        max-width: none; 
    } 
     section#game-launcher.active {
        margin-top: 80px; 
        padding: 20px; 
     }
    
    section h2 {
      margin-top: 0; 
      color: #003B73;
      text-align: center;
      margin-bottom: 20px; 
    }
    section#game-launcher h2 {
        color: #fff; 
        font-size: 2rem;
        margin-bottom: 30px;
    }

    section:not(#login):not(#game-launcher) button { padding:10px 15px; margin:8px 4px; font-size:0.9rem; cursor:pointer; border:none; border-radius:8px; background:#005A9C; color:white; transition:background .2s; }
    section#xo .xo-options button, section#memory .memory-options button { font-size: 0.9rem; padding: 10px 12px;} 
    section:not(#login):not(#game-launcher) button:hover { background:#003B73; }
    section:not(#login):not(#game-launcher) button:disabled { background:#ccc; cursor:not-allowed; }
    .status, .result, .message, .timebox { margin:15px 0; font-size:1.1rem; min-height: 1.2em; text-align: center;}
    
    .xo-board-container { position: relative; width: 316px; height: 316px; margin: 0 auto 20px auto; }
    .board { display:grid; grid-template-columns:repeat(3,100px); gap:8px; justify-content:center; }
    .cell { width:100px; height:100px; border:2px solid #aaa; display:flex; align-items:center; justify-content:center; font-size:2.8rem; background:#f9f9f9; transition:background .2s; cursor:pointer; border-radius: 8px; color: #333; }
    .cell:hover { background:#e9e9e9; }
    #xo-winning-line-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
    .xo-options, .memory-options { margin-bottom: 15px; text-align: center; }
    .xo-options button, .memory-options button { margin: 0 3px; } 

    .gamebox, .cards { margin: 0 auto 20px auto; text-align: center; }
    .cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 380px; }
    .cards.disabled { pointer-events: none; }
    .cards.disabled .card:not(.matched) { opacity: 0.8; }

    .card { width: 80px; height: 80px; background-color: #007bff; color: white; display: flex; align-items: center; justify-content: center; font-size: 2rem; border-radius: 8px; cursor: pointer; transition: transform 0.3s, background-color 0.3s; transform-style: preserve-3d; }
    .card .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 8px; }
    .card .card-front { background-color: #005A9C; } 
    .card .card-back { background-color: #f0f0f0; color: #333; transform: rotateY(180deg); }
    .card.flipped { transform: rotateY(180deg); }
    .card.matched { background-color: #28a745 !important; cursor: default; opacity: 0.7; }
    .card.matched .card-front { background-color: #28a745 !important; } 
    .memory-scores { margin-bottom: 10px; font-weight: bold; }
    .memory-player-names-input { margin-bottom:15px; text-align:center; }
    .memory-player-names-input input { padding:8px; margin:0 5px; border-radius:5px; border:1px solid #ccc; text-align:center;}

    #click-target-area { text-align: left; min-height: 200px; background-color: #e9ecef; position: relative; border-radius: 8px; overflow: hidden; }
    #clickable-target { width: 50px; height: 50px; background-color: red; border-radius: 50%; position: absolute; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; transition: all 0.1s; }
    .timebox { padding: 20px; background-color: #6c757d; color: white; border-radius: 8px; font-size: 1.5rem; cursor: pointer; transition: background-color 0.3s; }
    .timebox.waiting { background-color: #dc3545; } 
    .timebox.ready { background-color: #28a745; } 

    .text-to-type { padding: 15px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 15px; font-size: 1.1rem; line-height: 1.6; background-color: #f8f9fa; direction: rtl; text-align: right; }
    #typing-input { width: 100%; padding: 10px; font-size: 1rem; border-radius: 8px; border: 1px solid #ccc; direction: rtl; text-align: right; }
    .input-group { text-align: center; } 
    .input-group input { margin: 0 auto 10px auto; display: block; max-width: 250px; text-align: center; padding:10px; border-radius: 8px; border:1px solid #ccc; }

    .hidden-by-auth { display: none !important; } 
    .button-text { margin: 0 5px; }

    .game-icons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 25px; padding: 20px; max-width: 800px; margin: 0 auto; }
    .game-icon-card { background-color: rgba(0, 43, 77, 0.6); border: 1px solid rgba(255, 255, 255, 0.25); border-radius: 12px; padding: 20px 15px; text-align: center; cursor: pointer; transition: transform 0.25s ease-out, box-shadow 0.25s ease-out, background-color 0.25s; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 130px; backdrop-filter: blur(5px); }
    .game-icon-card:hover { transform: translateY(-8px) scale(1.03); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35); background-color: rgba(0, 60, 110, 0.7); }
    .game-icon-card i { font-size: 3.5rem; margin-bottom: 12px; color: #cce7ff; transition: color 0.2s; }
    .game-icon-card:hover i { color: #fff; }
    .game-icon-card span { color: #fff; font-size: 1rem; font-weight: 500; }

    #settings p { margin-bottom: 10px; font-size: 1.1rem; }
    #settings .info-value { font-weight: bold; color: #005A9C; }
    #settings-status { margin-top: 15px; font-size: 0.9em; }

  </style>
</head>
<body>

  <button class="sidebar-toggle" id="sidebar-toggle-button">
    <i class='bx bx-menu'></i>
  </button>

  <div class="sidebar" id="mySidebar">
    <a href="javascript:void(0)" class="sidebar-close-btn" id="sidebar-close-button">×</a>
    <a href="#login" id="nav-login-link-sidebar">تسجيل الدخول</a>
    <a href="#game-launcher" id="nav-games-launcher-link-sidebar" style="display:none;">الألعاب</a>
    <a href="#settings" id="nav-settings-link-sidebar" style="display:none;">الإعدادات</a>
    <a href="#" id="admin-button-sidebar" style="display:none;" onclick="showAdminArea(event)">لوحة الأدمن</a>
    <!-- Dynamic game links will be added here by JS -->
  </div>


  <section id="login">
    <div class="wrapper">
        <form action="javascript:void(0);">
            <h1 id="login-title">تسجيل الدخول</h1>
            <div id="auth-form-fields">
                <div class="input-box">
                    <input type="email" placeholder="البريد الإلكتروني" id="login-email" required>
                    <i class='bx bxs-user'></i>
                </div>
                <div class="input-box">
                    <input type="password" placeholder="كلمة المرور" id="login-password" required>
                    <i class='bx bxs-lock-alt'></i>
                </div>
            </div>
            <button type="button" class="btn" id="btn-main-action">
                 <span class="button-text">تسجيل الدخول</span>
            </button>
            <div class="register-link">
                <p id="toggle-auth-mode-text">ليس لديك حساب؟ <a href="#" id="toggle-auth-mode-link-inner">إنشاء حساب</a></p>
            </div>
            <button type="button" class="btn" id="btn-logout" style="display:none; margin-top: 10px;">تسجيل الخروج</button>
        </form>
        <div id="auth-status" class="info">يرجى تسجيل الدخول أو إنشاء حساب جديد.</div>
    </div>
  </section>

  <section id="game-launcher">
    <h2>اختر لعبتك المفضلة!</h2>
    <div class="game-icons-grid" id="game-icons-grid-container">
    </div>
  </section>

  <section id="xo" class="game-section"> 
    <h2>إكس أو (XO)</h2>
    <div class="xo-options">
        <button id="xo-pvp">لاعب ضد لاعب</button>
        <button id="xo-pvc-hard">لاعب ضد كمبيوتر (صعب)</button> 
    </div>
    <div class="xo-board-container">
        <div class="board"></div> 
        <canvas id="xo-winning-line-canvas"></canvas>
    </div>
    <div class="status">اختر نمط اللعبة</div> 
    <button id="xo-restart" style="display:none;">إعادة اللعبة</button> 
  </section>

  <section id="memory" class="game-section"> 
    <h2>لعبة الذاكرة 🧠</h2> 
    <div class="memory-options">
        <button id="memory-pvp">لاعب ضد لاعب</button>
        <button id="memory-solo">لاعب واحد</button>
    </div>
    <div class="memory-player-names-input" style="display:none;">
        <input type="text" id="memory-player1-name" placeholder="اسم اللاعب 1">
        <input type="text" id="memory-player2-name" placeholder="اسم اللاعب 2">
        <button id="memory-start-pvp-named">ابدأ اللعب</button>
    </div>
    <div class="memory-scores" style="display:none;">
        <span id="memory-player1-score">اللاعب 1: 0</span>
        <span id="memory-player2-separator" style="display:none;"> | </span>
        <span id="memory-player2-score" style="display:none;">اللاعب 2: 0</span>
    </div>
    <div class="cards" style="display:none;"></div> 
    <div class="status">اختر نمط اللعبة</div> 
    <div class="gamebox">
        <button id="memory-restart" style="display:none;">إعادة اللعبة</button>
    </div> 
  </section>
  
  <section id="settings" class="game-section">
      <h2>الإعدادات ⚙️</h2>
      <p>البريد الإلكتروني: <span id="settings-user-email" class="info-value"></span></p>
      <button id="btn-change-password">تغيير كلمة المرور</button>
      <div id="settings-status" class="info"></div>
  </section>

  <section id="admin-area" class="game-section" style="display:none;">
      <h2>لوحة تحكم الأدمن 👑</h2>
      <p>مرحباً بك أيها الأدمن!</p>
      <p>في هذه المنطقة، يمكنك (نظريًا) إدارة المستخدمين.</p>
      <p><strong>ملاحظة:</strong> عرض قائمة المستخدمين وحذفهم يتطلب إعدادات من جهة الخادم (Backend) باستخدام Firebase Admin SDK لضمان الأمان. هذا الجزء هو مجرد واجهة توضيحية حاليًا.</p>
      <div id="admin-status" class="info"></div>
  </section>


  <!-- ... (باقي أقسام الألعاب كما هي) ... -->
  <section id="rps" class="game-section"> <h2>حجر ورقة مقص 🧱📄✂️</h2> <div class="gamebox"> <button data-choice="🧱">🧱</button> <button data-choice="📄">📄</button> <button data-choice="✂️">✂️</button> </div> <div class="result">اختر لبدء!</d> </div> </section>
  <section id="click" class="game-section"> <h2>اصطياد الهدف 🎯</h2> <div class="gamebox"><button id="click-start">ابدأ</button></div> <div id="click-target-area" class="gamebox" style="display:none;"></div> <div class="status">اضغط "ابدأ"</div> </section>
  <section id="react" class="game-section"> <h2>اختبار سرعة الضغط ⌛</h2> <div class="timebox" id="react-box">اضغط للبدء</div> </section>
  <section id="dice" class="game-section"> <h2>لعبة النرد 🎲</h2> <div class="gamebox"><button id="dice-roll">رمي النرد</button></div> <div class="result" id="dice-result" style="font-size: 3rem;">--</div> </section>
  <section id="math" class="game-section"> <h2>جمع الأرقام 🧮</h2> <div class="gamebox"><button id="math-start">ابدأ اللعبة</button></div> <div class="question-area" style="display:none; font-size: 1.5rem; margin-bottom: 15px; text-align:center;"></div> <div class="input-group" style="display:none;"> <input type="number" id="math-answer" placeholder="أدخل إجابتك"/> <button id="math-submit">تحقق</button> </div> <div class="result">--</div> </section>
  <section id="guessnum" class="game-section"> <h2>تخمين الرقم 🔢</h2> <div class="gamebox"><button id="guessnum-start">ابدأ اللعبة</button></div> <div class="input-group" style="display:none;"> <input type="number" id="guessnum-input" placeholder="خمن بين 1 و100"/> <button id="guessnum-submit">خمن</button> </div> <div class="result">--</div> <div class="message">خمن رقمًا بين 1 و 100</div> </section>
  <section id="bigsmall" class="game-section"> <h2>من الأكبر؟ 📏</h2> <div class="gamebox"><button id="bigsmall-start">ابدأ اللعبة</button></div> <div class="question-area" style="display:none; font-size: 1.5rem; margin-bottom: 15px; text-align:center;"></div> <div class="input-group" style="display:none;"> <input type="number" id="bigsmall-answer" placeholder="اكتب الرقم الأكبر"/> <button id="bigsmall-submit">تحقق</button> </div> <div class="result">--</div> </section>
  <section id="typing" class="game-section"> <h2>اختبار الكتابة ⌨️</h2> <div class="gamebox"><button id="typing-start">ابدأ الاختبار</button></div> <div class="text-to-type" style="display:none;"></div> <div class="input-group" style="display:none;"> <input type="text" id="typing-input" placeholder="اكتب النص هنا"/> <button id="typing-submit">تحقق</button> </div> <div class="status">--</div> </section>


  <audio id="snd-click" src="https://actions.google.com/sounds/v1/alarms/button_click.ogg"></audio>
  <audio id="snd-win" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="snd-lose" src="https://actions.google.com/sounds/v1/cartoon/cartoon_cowbell.ogg"></audio>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyDLzpa2HYzJZdZvY_YuviKZ6Zg0FhWTfJw", 
        authDomain: "my-site-cdd00.firebaseapp.com",
        projectId: "my-site-cdd00",
        storageBucket: "my-site-cdd00.firebasestorage.app",
        messagingSenderId: "514123463555",
        appId: "1:514123463555:web:8499c5bde152537a3dd4b6",
        measurementId: "G-3Y7SYCE0NZ"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const ADMIN_EMAIL = "ka6761386@gmail.com";

    document.addEventListener('DOMContentLoaded', () => {
      const playSound = (id) => { const s = document.getElementById(id); if (s) { s.currentTime = 0; s.play().catch(e => console.warn(`Sound ${id} play failed:`, e)); } };
      const updateButtonText = (buttonElement, baseText) => { if (buttonElement) { const textSpan = buttonElement.querySelector('.button-text') || document.createElement('span'); textSpan.className = 'button-text'; textSpan.textContent = baseText; buttonElement.innerHTML = ''; buttonElement.appendChild(textSpan); }};
      const updateElementText = (el, txt, type) => { if(el) { el.textContent = txt; const baseClasses = el.className.split(' ').filter(c => !['info','success','error','waiting','ready'].includes(c)).join(' '); el.className = baseClasses; if (type) el.classList.add(type); }};
      const showHideElement = (el, show, disp = 'block') => { if(el) el.style.display = show ? disp : 'none'; };
      const disableElement = (el, dis) => { if(el) el.disabled = dis; };

      const allSections = document.querySelectorAll('section');
      const sidebar = document.getElementById('mySidebar');
      const sidebarToggleButton = document.getElementById('sidebar-toggle-button');
      const sidebarCloseButton = document.getElementById('sidebar-close-button');
      
      // Sidebar links
      const navLoginLinkSidebar = document.getElementById('nav-login-link-sidebar');
      const navGamesLauncherLinkSidebar = document.getElementById('nav-games-launcher-link-sidebar');
      const navSettingsLinkSidebar = document.getElementById('nav-settings-link-sidebar');
      const adminButtonSidebar = document.getElementById('admin-button-sidebar');

      const gameLauncherSection = document.getElementById('game-launcher');
      const gameIconsGridContainer = document.getElementById('game-icons-grid-container');
      
      const gameNavLinksData = [
          { id: "xo", text: "إكس أو", icon: "bxs-grid-alt" }, 
          { id: "rps", text: "حجر ورقة مقص", icon: "bxs-joystick-button" },
          { id: "click", text: "اصطياد الهدف", icon: "bxs-bullseye" }, 
          { id: "react", text: "سرعة الضغط", icon: "bxs-stopwatch" },
          { id: "dice", text: "النرد", icon: "bxs-dice-5" }, 
          { id: "memory", text: "الذاكرة", icon: "bxs-brain" },
          { id: "math", text: "الرياضيات", icon: "bxs-calculator" }, 
          { id: "guessnum", text: "تخمين الرقم", icon: "bxs-help-circle" },
          { id: "bigsmall", text: "من الأكبر", icon: "bxs-sort-alt" }, 
          { id: "typing", text: "الكتابة", icon: "bxs-keyboard" }
      ];
      let isLoginMode = true;

      const loginTitle = document.getElementById('login-title');
      const mainActionButton = document.getElementById('btn-main-action');
      const toggleAuthModeText = document.getElementById('toggle-auth-mode-text');
      const authFormFields = document.getElementById('auth-form-fields');
      const loginEmailInput = document.getElementById('login-email');
      const loginPasswordInput = document.getElementById('login-password');
      const btnLogout = document.getElementById('btn-logout'); // This button is inside the login form, might need to move it or create a new one for sidebar
      const authStatusDiv = document.getElementById('auth-status');

      const settingsUserEmailEl = document.getElementById('settings-user-email');
      const btnChangePassword = document.getElementById('btn-change-password');
      const settingsStatusDiv = document.getElementById('settings-status');
      const adminAreaSection = document.getElementById('admin-area');


       const updateAuthUI = (isLoggedIn, user, isVerified = true) => {
        showHideElement(authFormFields, !isLoggedIn);
        showHideElement(mainActionButton, !isLoggedIn);
        showHideElement(toggleAuthModeText.parentElement, !isLoggedIn);
        showHideElement(btnLogout, isLoggedIn); // Keep this for the login form if needed, or rely on sidebar's logout

        // Sidebar links visibility
        showHideElement(navLoginLinkSidebar, !isLoggedIn); // Show "Login" if not logged in
        showHideElement(navGamesLauncherLinkSidebar, isLoggedIn && isVerified);
        showHideElement(navSettingsLinkSidebar, isLoggedIn && isVerified);
        showHideElement(adminButtonSidebar, isLoggedIn && user && user.email === ADMIN_EMAIL);
        // Dynamic game links in sidebar will be handled by populateSidebarGameLinks

        const currentActiveSection = document.querySelector('section.active');
        const activeSectionId = currentActiveSection ? currentActiveSection.id : 'login';

        if (isLoggedIn) {
          loginTitle.textContent = `أهلاً بك`;
          if (isVerified) {
            updateElementText(authStatusDiv, user.email, 'success');
            if(gameIconsGridContainer && gameIconsGridContainer.children.length === 0) populateGameLauncher();
            if(settingsUserEmailEl) settingsUserEmailEl.textContent = user.email;
            populateSidebarGameLinks(); // Populate game links in sidebar
          } else {
            updateElementText(authStatusDiv, `تم تسجيل الدخول كـ ${user.email}. يرجى التحقق من بريدك الإلكتروني للوصول الكامل.`, 'info');
            if(gameIconsGridContainer) gameIconsGridContainer.innerHTML = ''; 
            if(settingsUserEmailEl) settingsUserEmailEl.textContent = "يرجى التحقق من بريدك أولاً.";
            clearSidebarGameLinks();
          }
          // Change login link in sidebar to logout
          navLoginLinkSidebar.textContent = 'تسجيل الخروج';
          navLoginLinkSidebar.href = "#logout"; 
          // The click handler for logout will be managed globally for sidebar links
          
        } else {
          isLoginMode = true; 
          updateLoginModeUI(); 
          updateElementText(authStatusDiv, 'يرجى تسجيل الدخول أو إنشاء حساب جديد.', 'info');
          // Change sidebar link back to login
          navLoginLinkSidebar.textContent = 'تسجيل الدخول';
          navLoginLinkSidebar.href = "#login";

          if(gameIconsGridContainer) gameIconsGridContainer.innerHTML = ''; 
          if(settingsUserEmailEl) settingsUserEmailEl.textContent = "غير مسجل الدخول";
          updateElementText(settingsStatusDiv, '', 'info');
          clearSidebarGameLinks();
          allSections.forEach(s => { 
                if(s.id !== 'login' && s.id !== 'admin-area') s.classList.remove('active'); // Keep admin area potentially active
          });
        }
        updateSidebarActiveLink(activeSectionId); 
      };

      const updateLoginModeUI = () => { /* ... (same as before) ... */ 
        const linkId = 'toggle-auth-mode-link-inner';
        if (isLoginMode) {
          loginTitle.textContent = 'تسجيل الدخول';
          updateButtonText(mainActionButton, 'تسجيل الدخول'); 
          toggleAuthModeText.innerHTML = `ليس لديك حساب؟ <a href="#" id="${linkId}">إنشاء حساب</a>`;
          loginPasswordInput.placeholder = "كلمة المرور";
        } else {
          loginTitle.textContent = 'إنشاء حساب جديد';
          updateButtonText(mainActionButton, 'إنشاء حساب'); 
          toggleAuthModeText.innerHTML = `لديك حساب بالفعل؟ <a href="#" id="${linkId}">تسجيل الدخول</a>`;
          loginPasswordInput.placeholder = "كلمة المرور (6+ حروف)";
        }
        const newToggleLink = document.getElementById(linkId);
        if(newToggleLink) newToggleLink.addEventListener('click', toggleMode);
      };
      
      const toggleMode = (e) => { /* ... (same as before) ... */ 
        if(e) e.preventDefault(); 
        isLoginMode = !isLoginMode; 
        updateLoginModeUI(); 
        updateElementText(authStatusDiv, isLoginMode ? 'أدخل بيانات تسجيل الدخول.' : 'أدخل بيانات لإنشاء حساب جديد.', 'info'); 
      };

      const handleAuthAction = () => { /* ... (same as before) ... */ 
        const email = loginEmailInput.value.trim(); const password = loginPasswordInput.value;
        if (!email || !password) { updateElementText(authStatusDiv, "الرجاء إدخال البريد الإلكتروني وكلمة المرور.", 'error'); return; }
        if (!isLoginMode && password.length < 6) { updateElementText(authStatusDiv, "كلمة المرور يجب أن تكون 6 حروف على الأقل.", 'error'); return; }
        
        updateElementText(authStatusDiv, isLoginMode ? 'جاري تسجيل الدخول...' : 'جاري إنشاء الحساب...', 'info');
        disableElement(mainActionButton, true);

        if (isLoginMode) { 
            auth.signInWithEmailAndPassword(email, password)
              .then((userCredential) => {
                if (userCredential.user && !userCredential.user.emailVerified) {
                  updateElementText(authStatusDiv, "لقد سجلت الدخول، ولكن يجب التحقق من بريدك الإلكتروني أولاً.", 'error');
                  auth.signOut(); 
                } else {
                  loginEmailInput.value = ''; loginPasswordInput.value = '';
                }
              })
              .catch((error) => {
                let msg = "حدث خطأ. حاول مرة أخرى.";
                if (error.code === 'auth/invalid-api-key' || (error.code === 'auth/internal-error' && error.message.includes("API key not valid"))) {
                    msg = "خطأ في تهيئة خدمة المصادقة. تأكد من صحة مفتاح API في الكود.";
                } else if (error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found' || error.code === 'auth/invalid-credential') msg = "البريد الإلكتروني أو كلمة المرور غير صحيحة.";
                else if (error.code === 'auth/invalid-email') msg = "صيغة البريد الإلكتروني غير صحيحة.";
                console.error("Auth Error Code:",error.code, "Message:", error.message); updateElementText(authStatusDiv, msg, 'error');
              })
              .finally(() => { disableElement(mainActionButton, false); });
        } else { 
            auth.createUserWithEmailAndPassword(email, password)
              .then((userCredential) => {
                if (userCredential.user) {
                  userCredential.user.sendEmailVerification()
                    .then(() => {
                      updateElementText(authStatusDiv, 'تم إنشاء الحساب بنجاح! تم إرسال رسالة تحقق إلى بريدك الإلكتروني. يرجى التحقق منها ثم تسجيل الدخول.', 'success');
                      auth.signOut(); 
                    })
                    .catch((error) => {
                      console.error("Error sending verification email:", error);
                      updateElementText(authStatusDiv, 'تم إنشاء الحساب، ولكن فشل إرسال بريد التحقق. حاول تسجيل الدخول لاحقًا.', 'error');
                       auth.signOut(); 
                    });
                }
                loginEmailInput.value = ''; loginPasswordInput.value = '';
              })
              .catch((error) => {
                let msg = "حدث خطأ. حاول مرة أخرى.";
                if (error.code === 'auth/invalid-api-key' || (error.code === 'auth/internal-error' && error.message.includes("API key not valid"))) {
                    msg = "خطأ في تهيئة خدمة المصادقة. تأكد من صحة مفتاح API في الكود.";
                } else if (error.code === 'auth/email-already-in-use') msg = "هذا البريد الإلكتروني مستخدم بالفعل.";
                else if (error.code === 'auth/weak-password') msg = "كلمة المرور ضعيفة (6 حروف على الأقل).";
                else if (error.code === 'auth/invalid-email') msg = "صيغة البريد الإلكتروني غير صحيحة.";
                console.error("Auth Error Code:",error.code, "Message:", error.message); updateElementText(authStatusDiv, msg, 'error');
              })
              .finally(() => { disableElement(mainActionButton, false); });
        }
      };
      updateLoginModeUI(); 
      mainActionButton.addEventListener('click', handleAuthAction);
      
      // Logout logic for the main button in login form (if you keep it)
      btnLogout.addEventListener('click', () => { 
        auth.signOut().catch(e => console.error('Logout error', e)); 
        updateElementText(authStatusDiv, 'يرجى تسجيل الدخول أو إنشاء حساب جديد.', 'info');
        window.location.hash = 'login';
        closeSidebar();
      });


      if(btnChangePassword) { /* ... (same as before) ... */ 
          btnChangePassword.addEventListener('click', () => {
              const user = auth.currentUser;
              if (user && user.email) {
                  auth.sendPasswordResetEmail(user.email)
                      .then(() => {
                          updateElementText(settingsStatusDiv, 'تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني.', 'success');
                      })
                      .catch((error) => {
                          console.error("Error sending password reset email:", error);
                          updateElementText(settingsStatusDiv, 'فشل إرسال رابط إعادة تعيين كلمة المرور. حاول مرة أخرى.', 'error');
                      });
              } else {
                  updateElementText(settingsStatusDiv, 'يجب أن تكون مسجلاً الدخول لتغيير كلمة المرور.', 'error');
              }
          });
      }

      window.showAdminArea = (event) => { 
          event.preventDefault();
          window.location.hash = "admin-area";
          closeSidebar();
      };

      const populateGameLauncher = () => { /* ... (same as before) ... */ 
        if (!gameIconsGridContainer) return;
        gameIconsGridContainer.innerHTML = ''; 
        gameNavLinksData.forEach(game => {
            const card = document.createElement('div');
            card.className = 'game-icon-card';
            card.dataset.targetId = game.id;
            const icon = document.createElement('i');
            icon.className = `bx ${game.icon}`;
            const nameSpan = document.createElement('span');
            nameSpan.textContent = game.text;
            card.appendChild(icon);
            card.appendChild(nameSpan);
            card.addEventListener('click', (e) => {
                const targetId = e.currentTarget.dataset.targetId;
                const currentUser = auth.currentUser;
                if (currentUser && currentUser.emailVerified) {
                    playSound('snd-click');
                    window.location.hash = targetId;
                } else {
                    updateElementText(authStatusDiv, "يجب تسجيل الدخول والتحقق من بريدك الإلكتروني أولاً للعب.", "error");
                    window.location.hash = 'login';
                }
            });
            gameIconsGridContainer.appendChild(card);
        });
      };

      const populateSidebarGameLinks = () => {
          clearSidebarGameLinks(); // Clear existing dynamic links first
          const adminButton = document.getElementById('admin-button-sidebar'); // Reference to insert before

          gameNavLinksData.forEach(game => {
              const gameLink = document.createElement('a');
              gameLink.href = `#${game.id}`;
              gameLink.textContent = game.text;
              gameLink.classList.add('sidebar-game-link'); // For easy removal
              gameLink.onclick = handleSidebarLinkClick;
              if (adminButton && adminButton.parentNode === sidebar) {
                 sidebar.insertBefore(gameLink, adminButton);
              } else {
                 sidebar.appendChild(gameLink); // Fallback if admin button isn't there
              }
          });
      };
      const clearSidebarGameLinks = () => {
          const dynamicLinks = sidebar.querySelectorAll('.sidebar-game-link');
          dynamicLinks.forEach(link => link.remove());
      };

      const updateSidebarActiveLink = (activeSectionId) => { 
        const links = sidebar.querySelectorAll('a');
        links.forEach(a => {
            if (a) a.classList.remove('active-nav-link');
            // Check if href matches, considering the #
            if (a && a.getAttribute('href') === `#${activeSectionId}`) {
                a.classList.add('active-nav-link');
            }
        });
        // Special case for logout which is part of login link when logged in
        if (activeSectionId === 'login' && auth.currentUser) {
            // No specific active state for logout, login link text changes
        } else if (activeSectionId === 'login' && !auth.currentUser) {
            if(navLoginLinkSidebar) navLoginLinkSidebar.classList.add('active-nav-link');
        }
      };


      const showSectionByHash = () => {
        let hash = window.location.hash.slice(1);
        if (!hash && auth.currentUser && auth.currentUser.emailVerified) {
            hash = 'game-launcher'; // Default to game launcher if logged in and no hash
            window.location.hash = hash; // Update URL
        } else if (!hash && (!auth.currentUser || !auth.currentUser.emailVerified)) {
            hash = 'login'; // Default to login if not logged in and no hash
             window.location.hash = hash; // Update URL
        }


        const currentUser = auth.currentUser;
        const isVerified = currentUser && currentUser.emailVerified;
        let targetIdToShow = 'login'; 

        if (isVerified) {
            if (hash === 'game-launcher' || gameNavLinksData.some(game => game.id === hash) || hash === 'settings' || (hash === 'admin-area' && currentUser.email === ADMIN_EMAIL)) {
                targetIdToShow = hash;
            } else if (hash === 'login'){ // If explicitly trying to go to login while verified
                 targetIdToShow = 'game-launcher'; // Redirect to game launcher
                 if (window.location.hash !== '#game-launcher') window.location.hash = 'game-launcher';
            } else { // Default to game launcher if hash is unknown and verified
                targetIdToShow = 'game-launcher';
                if (window.location.hash !== '#game-launcher') window.location.hash = 'game-launcher';
            }
        } else { // Not verified or not logged in
            if (hash !== 'login' && hash !== '') { // If trying to access other sections, redirect to login
                 if (window.location.hash !== '#login') window.location.hash = 'login';
                 targetIdToShow = 'login';
            } else { // Already at login or no hash
                targetIdToShow = 'login';
            }
        }
        
        allSections.forEach(s => {
            if (s.id === targetIdToShow) {
                s.classList.add('active');
            } else {
                s.classList.remove('active');
            }
        });
        updateSidebarActiveLink(targetIdToShow);
        if (targetIdToShow === 'settings' && settingsStatusDiv) updateElementText(settingsStatusDiv, '', 'info'); 
      };
      
      auth.onAuthStateChanged(user => {
        updateAuthUI(!!user, user, user ? user.emailVerified : false);
        showSectionByHash(); // Call this to ensure correct section is shown after auth state change
      });

      const handleSidebarLinkClick = (e) => {
          e.preventDefault(); 
          const targetHash = e.currentTarget.getAttribute('href');
          if (targetHash === '#logout') { 
            auth.signOut().catch(err => console.error('Logout error', err));
            window.location.hash = 'login'; // Go to login after logout
          } else {
            window.location.hash = targetHash;
          }
          closeSidebar();
      };

      // Assign click handlers to static sidebar links
      navLoginLinkSidebar.addEventListener('click', handleSidebarLinkClick);
      if (navGamesLauncherLinkSidebar) navGamesLauncherLinkSidebar.addEventListener('click', handleSidebarLinkClick);
      if (navSettingsLinkSidebar) navSettingsLinkSidebar.addEventListener('click', handleSidebarLinkClick);
      // Admin button has onclick in HTML for showAdminArea, which then changes hash and calls closeSidebar.
      
      window.addEventListener('hashchange', showSectionByHash);

      // Sidebar Toggle Logic
      function openSidebar() {
        if(sidebar) sidebar.classList.add('open');
      }
      function closeSidebar() {
        if(sidebar) sidebar.classList.remove('open');
      }
      if(sidebarToggleButton) sidebarToggleButton.addEventListener('click', openSidebar);
      if(sidebarCloseButton) sidebarCloseButton.addEventListener('click', closeSidebar);
      document.addEventListener('click', function(event) {
        if (sidebar && sidebar.classList.contains('open') && 
            !sidebar.contains(event.target) && 
            !sidebarToggleButton.contains(event.target)) {
            closeSidebar();
        }
      });


      // --- Game Initializations ---
      const initXOGame = () => { /* ... (same as before) ... */ 
          const section = document.querySelector('#xo');
          if (!section) return;
          const boardElement = section.querySelector('.board');
          const statusElement = section.querySelector('.status');
          const restartButton = section.querySelector('#xo-restart');
          const pvpButton = section.querySelector('#xo-pvp');
          const pvcHardButton = section.querySelector('#xo-pvc-hard'); 
          const canvas = section.querySelector('#xo-winning-line-canvas');
          const ctx = canvas.getContext('2d');
          const boardContainer = section.querySelector('.xo-board-container');

          let boardState = Array(9).fill('');
          let currentPlayer = '❌';
          let gameActive = false;
          let gameMode = null; 
          const playerSymbol = '❌';
          const computerSymbol = '⭕';

          const winningPatterns = [
              [0, 1, 2], [3, 4, 5], [6, 7, 8], 
              [0, 3, 6], [1, 4, 7], [2, 5, 8], 
              [0, 4, 8], [2, 4, 6]             
          ];

          const resizeCanvas = () => {
              canvas.width = boardContainer.offsetWidth;
              canvas.height = boardContainer.offsetHeight;
          };

          const drawWinningLine = (combination) => {
              if (!combination || combination.length < 3) return;
              resizeCanvas(); 
              ctx.clearRect(0, 0, canvas.width, canvas.height); 
              
              ctx.save(); 
              ctx.translate(0.5, 0.5); 

              ctx.beginPath();
              ctx.lineWidth = 10; 
              ctx.strokeStyle = 'rgba(220, 53, 69, 0.9)'; 
              ctx.lineCap = 'round';

              const cellSize = 100; 
              const gap = 8;      

              const getCellCenter = (index) => {
                  const row = Math.floor(index / 3);
                  const col = index % 3;
                  const x = col * (cellSize + gap) + cellSize / 2;
                  const y = row * (cellSize + gap) + cellSize / 2;
                  return { x, y };
              };

              const startCell = getCellCenter(combination[0]);
              const endCell = getCellCenter(combination[2]);

              ctx.moveTo(startCell.x, startCell.y);
              ctx.lineTo(endCell.x, endCell.y);
              ctx.stroke();
              
              ctx.restore(); 
          };
          
          const checkWin = () => { 
              for (const pattern of winningPatterns) {
                  const [a, b, c] = pattern;
                  if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) {
                      return { winner: boardState[a], combination: pattern };
                  }
              }
              if (!boardState.includes('')) return { winner: 'tie', combination: null }; 
              return null; 
          };
          
          const checkWinWithBoard = (boardToCheck) => {
            for (const pattern of winningPatterns) {
                const [a, b, c] = pattern;
                if (boardToCheck[a] && boardToCheck[a] === boardToCheck[b] && boardToCheck[a] === boardToCheck[c]) {
                    return { winner: boardToCheck[a], combination: pattern };
                }
            }
            if (!boardToCheck.includes('')) return { winner: 'tie', combination: null };
            return null;
          };

          const handleClick = (index) => {
              if (!gameActive || boardState[index] || !auth.currentUser || !auth.currentUser.emailVerified) return;

              boardState[index] = currentPlayer;
              boardElement.children[index].textContent = currentPlayer;
              playSound('snd-click');

              const winResult = checkWin();
              if (winResult) {
                  gameActive = false;
                  if (winResult.winner === 'tie') {
                      updateElementText(statusElement, 'تعادل!');
                      playSound('snd-lose');
                  } else {
                      updateElementText(statusElement, `فاز ${winResult.winner}!`);
                      playSound('snd-win');
                      drawWinningLine(winResult.combination);
                  }
                  showHideElement(restartButton, true);
                  return;
              }
              
              currentPlayer = (currentPlayer === playerSymbol) ? computerSymbol : playerSymbol;
              updateElementText(statusElement, `الدور: ${currentPlayer}`);

              if (gameMode === 'pvc-hard' && gameActive && currentPlayer === computerSymbol) {
                  disableBoardInteraction(true);
                  let moveDelay = 300 + Math.random() * 200; 
                  setTimeout(() => {
                      const moveIndex = computerMoveHard();
                      if (moveIndex !== -1 && boardState[moveIndex] === '') { 
                          handleClick(moveIndex); 
                      }
                      disableBoardInteraction(false);
                  }, moveDelay);
              } else {
                  disableBoardInteraction(false);
              }
          };
          
          const disableBoardInteraction = (disable) => {
            Array.from(boardElement.children).forEach(cell => {
                cell.style.pointerEvents = disable ? 'none' : 'auto';
            });
          };

          const computerMoveHard = () => { 
            if (!gameActive) return -1;
            const findStrategicMove = (player, currentBoardState) => {
                for (let i = 0; i < currentBoardState.length; i++) {
                    if (currentBoardState[i] === '') {
                        let tempBoard = [...currentBoardState];
                        tempBoard[i] = player; 
                        const winCheck = checkWinWithBoard(tempBoard);
                        if (winCheck && winCheck.winner === player) return i; 
                    }
                }
                return -1; 
            };
            let move = findStrategicMove(computerSymbol, boardState); if (move !== -1) return move;
            move = findStrategicMove(playerSymbol, boardState); if (move !== -1) return move;
            if (boardState[4] === '') return 4;
            const corners = [0, 2, 6, 8];
            const emptyCorners = corners.filter(corner => boardState[corner] === '');
            if (emptyCorners.length > 0) return emptyCorners[Math.floor(Math.random() * emptyCorners.length)];
            const sides = [1, 3, 5, 7];
            const emptySides = sides.filter(side => boardState[side] === '');
            if (emptySides.length > 0) return emptySides[Math.floor(Math.random() * emptySides.length)];
            for (let i = 0; i < boardState.length; i++) { if (boardState[i] === '') return i;}
            return -1; 
          };

          const startGameMode = (mode) => {
              if (!auth.currentUser || !auth.currentUser.emailVerified) {
                  updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.', 'info');
                  return;
              }
              gameMode = mode;
              gameActive = true;
              boardState.fill('');
              currentPlayer = playerSymbol; 
              Array.from(boardElement.children).forEach(cell => cell.textContent = '');
              ctx.clearRect(0, 0, canvas.width, canvas.height); 
              updateElementText(statusElement, `الدور: ${currentPlayer}`);
              showHideElement(section.querySelector('.xo-options'), false); 
              showHideElement(restartButton, true); 
              disableBoardInteraction(false); 
              playSound('snd-click');
          };

          const resetGame = () => {
              gameActive = false; gameMode = null; boardState.fill(''); currentPlayer = playerSymbol;
              Array.from(boardElement.children).forEach(cell => cell.textContent = '');
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              updateElementText(statusElement, 'اختر نمط اللعبة');
              showHideElement(restartButton, false);
              showHideElement(section.querySelector('.xo-options'), true);
              disableBoardInteraction(false); 
              playSound('snd-click');
          };

          boardElement.innerHTML = Array(9).fill().map((_, i) => `<div class="cell" data-index="${i}"></div>`).join('');
          Array.from(boardElement.children).forEach((cell, i) => cell.addEventListener('click', () => handleClick(i)));
          
          if(pvpButton) pvpButton.addEventListener('click', () => startGameMode('pvp'));
          if(pvcHardButton) pvcHardButton.addEventListener('click', () => startGameMode('pvc-hard')); 
          if(restartButton) restartButton.addEventListener('click', resetGame);
          window.addEventListener('resize', resizeCanvas);
           const observer = new MutationObserver((mutationsList) => {
            for(const mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    if (section.classList.contains('active')) {
                        resizeCanvas(); 
                        if (!gameActive) resetGame();
                    }
                }
            }
          });
          if(section) observer.observe(section, { attributes: true });
          resetGame(); 
      };
      
      const initMemoryGame = () => { /* ... (same as previous correct version) ... */ 
        const section = document.querySelector('#memory'); if (!section) return;
        const cardsContainer = section.querySelector('.cards');
        const statusElement = section.querySelector('.status');
        const restartButton = section.querySelector('#memory-restart');
        const pvpButtonMemory = section.querySelector('#memory-pvp');
        const soloButtonMemory = section.querySelector('#memory-solo');
        const optionsDivMemory = section.querySelector('.memory-options');
        const scoresDivMemory = section.querySelector('.memory-scores');
        const player1ScoreEl = section.querySelector('#memory-player1-score');
        const player2ScoreEl = section.querySelector('#memory-player2-score');
        const player2Separator = section.querySelector('#memory-player2-separator');
        const playerNamesInputDiv = section.querySelector('.memory-player-names-input');
        const player1NameInput = section.querySelector('#memory-player1-name');
        const player2NameInput = section.querySelector('#memory-player2-name');
        const startPvpNamedButton = section.querySelector('#memory-start-pvp-named');

        const cardValues = ['🧠', '🎮', '🎯', '🎲', '💡', '💻', '🌟', '🚀'];
        let gameCards = [];
        let flippedCards = [];
        let canFlip = true;
        let gameActiveMemory = false;
        let gameModeMemory = null; 
        let currentPlayerMemory = null; 
        let playerNames = { player1: "اللاعب 1", player2: "اللاعب 2" };
        let scoresMemory = { player1: 0, player2: 0 };
        const FLIP_BACK_DELAY = 1800; 

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function updateScoresDisplay() {
            if (gameModeMemory === 'pvp-memory') {
                player1ScoreEl.textContent = `${playerNames.player1}: ${scoresMemory.player1}`;
                player2ScoreEl.textContent = `${playerNames.player2}: ${scoresMemory.player2}`;
                showHideElement(player2ScoreEl, true);
                showHideElement(player2Separator, true);
            } else if (gameModeMemory === 'solo-memory') {
                player1ScoreEl.textContent = `النقاط: ${scoresMemory.player1}`;
                showHideElement(player2ScoreEl, false);
                showHideElement(player2Separator, false);
            }
        }
        
        function updateStatus() {
            if (!gameActiveMemory) {
                updateElementText(statusElement, "اختر نمط اللعبة"); return;
            }
            let turnText = "";
            if (gameModeMemory === 'pvp-memory') {
                turnText = currentPlayerMemory === 'player1' ? `دور ${playerNames.player1}` : `دور ${playerNames.player2}`;
            } else if (gameModeMemory === 'solo-memory') {
                turnText = "ابحث عن التطابقات!";
            }
            updateElementText(statusElement, turnText);
        }

        function preparePvpNameInputs() {
            showHideElement(optionsDivMemory, false);
            showHideElement(playerNamesInputDiv, true);
            player1NameInput.value = ''; player2NameInput.value = '';
        }

        function startGameMemory(mode) {
            if (!auth.currentUser || !auth.currentUser.emailVerified) {
                updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            gameModeMemory = mode;
            if (mode === 'pvp-memory') {
                playerNames.player1 = player1NameInput.value.trim() || "اللاعب 1";
                playerNames.player2 = player2NameInput.value.trim() || "اللاعب 2";
            }
            gameActiveMemory = true; canFlip = true; flippedCards = [];
            scoresMemory = { player1: 0, player2: 0 }; currentPlayerMemory = 'player1';
            showHideElement(optionsDivMemory, false); showHideElement(playerNamesInputDiv, false);
            showHideElement(scoresDivMemory, true); showHideElement(cardsContainer, true, 'grid');
            cardsContainer.classList.remove('disabled'); showHideElement(restartButton, true);
            updateScoresDisplay(); createMemoryBoard(); updateStatus(); playSound('snd-click');
        }

        function createMemoryBoard() {
            if(!cardsContainer) return;
            cardsContainer.innerHTML = ''; let items = shuffle([...cardValues, ...cardValues]); gameCards = [];
            items.forEach((value, index) => {
                const card = document.createElement('div'); card.classList.add('card');
                card.dataset.value = value; card.dataset.id = index; 
                const cardFaceFront = document.createElement('div'); cardFaceFront.classList.add('card-face', 'card-front');
                const cardFaceBack = document.createElement('div'); cardFaceBack.classList.add('card-face', 'card-back');
                cardFaceBack.textContent = value; card.appendChild(cardFaceFront); card.appendChild(cardFaceBack);
                card.addEventListener('click', () => flipCardMemory(card));
                cardsContainer.appendChild(card); gameCards.push(card);
            });
        }
        
         function flipCardMemory(card) {
            if (!auth.currentUser || !auth.currentUser.emailVerified) { updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.', 'info'); return; }
            if (!gameActiveMemory || !canFlip || card.classList.contains('flipped') || card.classList.contains('matched')) return;
            card.classList.add('flipped'); flippedCards.push(card); playSound('snd-click');
            if (flippedCards.length === 2) { canFlip = false; checkForMatchMemory(); }
        }

        function checkForMatchMemory() {
            const [card1, card2] = flippedCards; const isMatch = card1.dataset.value === card2.dataset.value;
            if (isMatch) {
                card1.classList.add('matched'); card2.classList.add('matched');
                if (gameModeMemory === 'pvp-memory') {
                    if (currentPlayerMemory === 'player1') scoresMemory.player1++; else if (currentPlayerMemory === 'player2') scoresMemory.player2++;
                } else { scoresMemory.player1++; }
                updateScoresDisplay(); playSound('snd-win');
                const totalPairs = cardValues.length;
                const matchedPairsCount = scoresMemory.player1 + (gameModeMemory === 'pvp-memory' ? scoresMemory.player2 : 0);
                if (matchedPairsCount === totalPairs) {
                    gameActiveMemory = false; canFlip = false; let winnerMsg = "انتهت اللعبة! ";
                    if (gameModeMemory === 'pvp-memory') {
                        if (scoresMemory.player1 > scoresMemory.player2) winnerMsg += `فاز ${playerNames.player1}!`;
                        else if (scoresMemory.player2 > scoresMemory.player1) winnerMsg += `فاز ${playerNames.player2}!`;
                        else winnerMsg += "تعادل!";
                    } else { winnerMsg += `أحسنت!`; }
                    updateElementText(statusElement, winnerMsg, 'success'); showHideElement(restartButton, true); 
                } else {
                    flippedCards = []; canFlip = true; 
                    if (gameModeMemory === 'pvp-memory') updateStatus(); 
                }
            } else {
                playSound('snd-lose');
                setTimeout(() => {
                    card1.classList.remove('flipped'); card2.classList.remove('flipped'); flippedCards = [];
                    if (gameActiveMemory) {
                        if (gameModeMemory === 'pvp-memory') switchPlayerMemory(); else canFlip = true; 
                    }
                }, FLIP_BACK_DELAY); 
            }
        }

        function switchPlayerMemory() { 
            if (!gameActiveMemory || gameModeMemory !== 'pvp-memory') return;
            currentPlayerMemory = currentPlayerMemory === 'player1' ? 'player2' : 'player1';
            updateStatus(); canFlip = true; 
        }
        
        function resetMemoryGame() {
            gameActiveMemory = false; gameModeMemory = null; cardsContainer.innerHTML = '';
            showHideElement(optionsDivMemory, true); showHideElement(playerNamesInputDiv, false);
            showHideElement(cardsContainer, false); showHideElement(scoresDivMemory, false);
            showHideElement(restartButton, false); updateElementText(statusElement, 'اختر نمط اللعبة');
            canFlip = true; playSound('snd-click');
        }

        if(pvpButtonMemory) pvpButtonMemory.addEventListener('click', preparePvpNameInputs);
        if(startPvpNamedButton) startPvpNamedButton.addEventListener('click', () => startGameMemory('pvp-memory'));
        if(soloButtonMemory) soloButtonMemory.addEventListener('click', () => startGameMemory('solo-memory'));
        if(restartButton) restartButton.addEventListener('click', resetMemoryGame);
        resetMemoryGame();
        const observer = new MutationObserver((mutationsList) => {
            for(const mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    if (section.classList.contains('active') && !gameActiveMemory) resetMemoryGame();
                }
            }
        });
        if(section) observer.observe(section, { attributes: true });
      };
      
      const initRPSGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#rps'); if(!section) return;
        const resultElement = section.querySelector('.result');
        const choiceButtons = section.querySelectorAll('.gamebox button');
        const options = ['🧱', '📄', '✂️']; 
        if(resultElement) updateElementText(resultElement, 'اختر لبدء!');
        choiceButtons.forEach(button => button.addEventListener('click', () => {
          if(!auth.currentUser||!auth.currentUser.emailVerified) {updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.','info'); return;}
          const playerChoice = button.dataset.choice;
          const computerChoice = options[Math.floor(Math.random() * options.length)];
          let message = 'تعادل';
          if ( (playerChoice === '🧱' && computerChoice === '✂️') || (playerChoice === '📄' && computerChoice === '🧱') || (playerChoice === '✂️' && computerChoice === '📄') ) { message = 'فزت'; }
          else if (playerChoice !== computerChoice) { message = 'خسرت'; }
          updateElementText(resultElement, `${message}! أنت: ${playerChoice} الكومبيوتر: ${computerChoice}`);
          playSound(message === 'فزت' ? 'snd-win' : message === 'خسرت' ? 'snd-lose' : 'snd-click');
        }));
      };

      const initClickTargetGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#click'); if (!section) return;
        const startButton = section.querySelector('#click-start');
        const targetArea = section.querySelector('#click-target-area');
        const statusElement = section.querySelector('.status');
        let score = 0; let gameTimerId; let targetElement;
        const gameDuration = 15000; 

        const spawnTarget = () => {
            if(!targetArea) return; 
            if (targetElement) targetElement.remove();
            targetElement = document.createElement('div');
            targetElement.id = 'clickable-target';
            targetElement.textContent = '🎯';
            const areaRect = targetArea.getBoundingClientRect();
            const targetSize = 50;
             if (areaRect.height <= targetSize || areaRect.width <= targetSize) { 
                return; 
            }
            targetElement.style.top = Math.random() * (areaRect.height - targetSize) + 'px';
            targetElement.style.left = Math.random() * (areaRect.width - targetSize) + 'px';
            targetElement.onclick = () => {
                if(!auth.currentUser||!auth.currentUser.emailVerified) {updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.','info'); return;}
                score++;
                updateElementText(statusElement, `النقاط: ${score}`);
                playSound('snd-click');
                spawnTarget();
            };
            targetArea.appendChild(targetElement);
        };

        const startGame = () => {
            if (!auth.currentUser||!auth.currentUser.emailVerified) {updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.','info'); return;}
            score = 0;
            updateElementText(statusElement, 'النقاط: 0');
            showHideElement(startButton, false);
            showHideElement(targetArea, true);
            disableElement(startButton, true);
            setTimeout(spawnTarget, 50);

            clearTimeout(gameTimerId);
            gameTimerId = setTimeout(() => {
                if (targetElement) targetElement.remove();
                updateElementText(statusElement, `انتهت اللعبة! نقاطك: ${score}`);
                playSound(score > 5 ? 'snd-win' : 'snd-lose');
                showHideElement(startButton, true);
                showHideElement(targetArea, false);
                disableElement(startButton, false);
            }, gameDuration);
        };
        if(startButton) startButton.addEventListener('click', startGame);
        if(statusElement) updateElementText(statusElement, 'اضغط "ابدأ"');
      };

      const initReactionTestGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#react'); if (!section) return;
        const reactBox = section.querySelector('#react-box');
        let startTime, timeoutId, waitingForClick = false;

        const startGame = () => {
            if(!reactBox) return;
            if (!auth.currentUser||!auth.currentUser.emailVerified) {updateElementText(reactBox, 'يرجى التحقق من بريدك للعب.','info'); reactBox.classList.remove('waiting', 'ready'); return;}
            
            if (waitingForClick) { 
                if (reactBox.classList.contains('ready')) { 
                    const reactionTime = Date.now() - startTime;
                    updateElementText(reactBox, `وقتك: ${reactionTime} مللي ثانية. اضغط للبدء من جديد.`);
                    playSound('snd-win');
                } else { 
                    updateElementText(reactBox, 'مبكر جداً! اضغط للبدء من جديد.');
                    playSound('snd-lose');
                }
                waitingForClick = false;
                clearTimeout(timeoutId);
                reactBox.classList.remove('waiting', 'ready');
                return;
            }
            
            updateElementText(reactBox, 'انتظر اللون الأخضر...', 'waiting');
            waitingForClick = true;
            const randomDelay = Math.random() * 3000 + 1000; 

            timeoutId = setTimeout(() => {
                if (waitingForClick) { 
                    updateElementText(reactBox, 'اضغط الآن!', 'ready');
                    startTime = Date.now();
                }
            }, randomDelay);
        };
        if(reactBox) {
            reactBox.addEventListener('click', startGame);
            updateElementText(reactBox, 'اضغط للبدء'); 
        }
      };

      const initDiceRollGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#dice'); if (!section) return;
        const rollButton = section.querySelector('#dice-roll');
        const resultElement = section.querySelector('#dice-result');
        const diceFaces = ['⚀', '⚁', '⚂', '⚃', '⚄', '⚅'];

        if(rollButton) rollButton.addEventListener('click', () => {
            if (!auth.currentUser||!auth.currentUser.emailVerified) {updateElementText(resultElement, '--'); if(resultElement) resultElement.textContent = 'يرجى التحقق من بريدك.'; return;}
            const roll = Math.floor(Math.random() * 6);
            updateElementText(resultElement, diceFaces[roll]);
            playSound('snd-click');
        });
        if(resultElement) updateElementText(resultElement, '--');
      };
      
      const initMathQuizGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#math'); if (!section) return;
        const startButton = section.querySelector('#math-start');
        const questionArea = section.querySelector('.question-area');
        const answerInput = section.querySelector('#math-answer');
        const submitButton = section.querySelector('#math-submit');
        const resultElement = section.querySelector('.result');
        let correctAnswer;

        const generateQuestion = () => {
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            correctAnswer = num1 + num2;
            if(questionArea) questionArea.textContent = `${num1} + ${num2} = ?`;
            if(answerInput) answerInput.value = '';
            if(resultElement) updateElementText(resultElement, '--');
        };
        const startGame = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified) {
                if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            showHideElement(startButton, false);
            showHideElement(questionArea, true);
            showHideElement(section.querySelector('.input-group'), true, 'block'); 
            generateQuestion();
            if(answerInput) answerInput.focus();
            playSound('snd-click');
        };
        const checkAnswer = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified || !answerInput || !resultElement) {
                 if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            const userAnswer = parseInt(answerInput.value);
            if (isNaN(userAnswer)) {
                updateElementText(resultElement, 'الرجاء إدخال رقم صحيح.', 'error');
                return;
            }
            if (userAnswer === correctAnswer) {
                updateElementText(resultElement, 'صحيح! 🎉', 'success');
                playSound('snd-win');
                setTimeout(() => { 
                    if (section.classList.contains('active') && auth.currentUser && auth.currentUser.emailVerified) generateQuestion(); 
                }, 1500);
            } else {
                updateElementText(resultElement, `خطأ. الإجابة الصحيحة: ${correctAnswer}`, 'error');
                playSound('snd-lose');
            }
             if(answerInput) {answerInput.value = ''; answerInput.focus(); }
        };

        if(startButton) startButton.addEventListener('click', startGame);
        if(submitButton) submitButton.addEventListener('click', checkAnswer);
        if(answerInput) answerInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkAnswer(); });
        if(resultElement) updateElementText(resultElement, '--');
      };

      const initGuessNumberGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#guessnum'); if (!section) return;
        const startButton = section.querySelector('#guessnum-start');
        const inputField = section.querySelector('#guessnum-input');
        const submitButton = section.querySelector('#guessnum-submit');
        const resultElement = section.querySelector('.result');
        const messageElement = section.querySelector('.message');
        let secretNumber, attempts;
        const maxAttempts = 7;

        const startGame = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified) {
                if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            secretNumber = Math.floor(Math.random() * 100) + 1;
            attempts = 0;
            showHideElement(startButton, false);
            showHideElement(section.querySelector('.input-group'), true, 'block');
            if(inputField) inputField.value = '';
            if(messageElement) updateElementText(messageElement, `خمن رقمًا بين 1 و 100. لديك ${maxAttempts} محاولات.`);
            if(resultElement) updateElementText(resultElement, '--');
            if(inputField) inputField.focus();
            disableElement(submitButton, false);
            disableElement(inputField, false);
            playSound('snd-click');
        };
        const checkGuess = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified || !inputField || !resultElement || !messageElement) {
                if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            const guess = parseInt(inputField.value);
            if (isNaN(guess) || guess < 1 || guess > 100) {
                updateElementText(resultElement, 'الرجاء إدخال رقم بين 1 و 100.', 'error');
                return;
            }
            attempts++;
            if (guess === secretNumber) {
                updateElementText(resultElement, `أحسنت! لقد خمنت الرقم ${secretNumber} في ${attempts} محاولات.`, 'success');
                playSound('snd-win');
                if(messageElement) updateElementText(messageElement, 'اضغط "ابدأ اللعبة" للعب مرة أخرى.');
                showHideElement(startButton, true);
                disableElement(submitButton, true);
                disableElement(inputField, true);
            } else {
                playSound('snd-click');
                const remainingAttempts = maxAttempts - attempts;
                if (remainingAttempts <= 0) {
                    updateElementText(resultElement, `للأسف انتهت محاولاتك. الرقم الصحيح كان ${secretNumber}.`, 'error');
                    playSound('snd-lose');
                    if(messageElement) updateElementText(messageElement, 'اضغط "ابدأ اللعبة" للعب مرة أخرى.');
                    showHideElement(startButton, true);
                    disableElement(submitButton, true);
                    disableElement(inputField, true);
                } else {
                    updateElementText(resultElement, guess < secretNumber ? 'أعلى!' : 'أقل!', 'info');
                    if(messageElement) updateElementText(messageElement, `محاولات متبقية: ${remainingAttempts}`);
                }
            }
            if(inputField) {
                 inputField.value = '';
                 inputField.focus();
            }
        };
        if(startButton) startButton.addEventListener('click', startGame);
        if(submitButton) submitButton.addEventListener('click', checkGuess);
        if(inputField) inputField.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkGuess(); });
        if(messageElement) updateElementText(messageElement, 'خمن رقمًا بين 1 و 100');
      };

      const initBigSmallGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#bigsmall'); if (!section) return;
        const startButton = section.querySelector('#bigsmall-start');
        const questionArea = section.querySelector('.question-area');
        const answerInput = section.querySelector('#bigsmall-answer');
        const submitButton = section.querySelector('#bigsmall-submit');
        const resultElement = section.querySelector('.result');
        let num1, num2, biggerNum;

        const generateNumbers = () => {
            num1 = Math.floor(Math.random() * 100) + 1;
            do {
                num2 = Math.floor(Math.random() * 100) + 1;
            } while (num1 === num2); 
            biggerNum = Math.max(num1, num2);
            if(questionArea) questionArea.textContent = `أي الرقمين أكبر: ${num1} أم ${num2}؟`;
            if(answerInput) answerInput.value = '';
            if(resultElement) updateElementText(resultElement, '--');
        };
        const startGame = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified) {
                if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            showHideElement(startButton, false);
            showHideElement(questionArea, true);
            showHideElement(section.querySelector('.input-group'), true, 'block');
            generateNumbers();
            if(answerInput) answerInput.focus();
            playSound('snd-click');
        };
        const checkAnswer = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified || !answerInput || !resultElement) {
                if(resultElement) updateElementText(resultElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            const userAnswer = parseInt(answerInput.value);
            if (isNaN(userAnswer)) {
                updateElementText(resultElement, 'الرجاء إدخال رقم.', 'error');
                return;
            }
            if (userAnswer === biggerNum) {
                updateElementText(resultElement, 'صحيح! 🎉', 'success');
                playSound('snd-win');
                 setTimeout(() => { 
                    if (section.classList.contains('active') && auth.currentUser && auth.currentUser.emailVerified) generateNumbers();
                }, 1500);
            } else {
                updateElementText(resultElement, `خطأ. الرقم الأكبر كان ${biggerNum}.`, 'error');
                playSound('snd-lose');
            }
            if(answerInput) {answerInput.value = ''; answerInput.focus();}
        };
        if(startButton) startButton.addEventListener('click', startGame);
        if(submitButton) submitButton.addEventListener('click', checkAnswer);
        if(answerInput) answerInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkAnswer(); });
        if(resultElement) updateElementText(resultElement, '--');
      };

      const initTypingTestGame = () => { /* ... (same as before) ... */ 
        const section = document.querySelector('#typing'); if (!section) return;
        const startButton = section.querySelector('#typing-start');
        const textToTypeElement = section.querySelector('.text-to-type');
        const inputField = section.querySelector('#typing-input');
        const submitButton = section.querySelector('#typing-submit'); 
        const statusElement = section.querySelector('.status');

        const sampleTexts = [
            "أهلاً بك في اختبار الكتابة السريع. حاول أن تكتب هذه الجملة بدقة وسرعة.",
            "ممارسة الكتابة بانتظام تحسن من مهارتك بشكل ملحوظ.",
            "الألعاب الإلكترونية وسيلة رائعة للترفيه وتنمية بعض المهارات الذهنية.",
            "البرمجة هي لغة المستقبل، وتعلمها يفتح آفاقاً واسعة.",
            "الذكاء الاصطناعي يتطور بسرعة ويغير حياتنا اليومية."
        ];
        let currentTextToType = "";
        let startTime;

        const startGame = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified) {
                if(statusElement) updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            currentTextToType = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
            if(textToTypeElement) textToTypeElement.textContent = currentTextToType;
            if(inputField) inputField.value = '';
            showHideElement(startButton, false);
            showHideElement(textToTypeElement, true);
            showHideElement(section.querySelector('.input-group'), true, 'block'); 
            showHideElement(submitButton, true); 
            disableElement(inputField, false);
            disableElement(submitButton, false);
            if(statusElement) updateElementText(statusElement, 'ابدأ الكتابة...');
            if(inputField) inputField.focus();
            startTime = new Date();
            playSound('snd-click');
        };
        const checkTyping = () => {
            if (!auth.currentUser || !auth.currentUser.emailVerified || !inputField || !textToTypeElement || !statusElement) {
                if(statusElement) updateElementText(statusElement, 'يرجى التحقق من بريدك للعب.', 'info'); return;
            }
            const typedText = inputField.value;
            const originalText = textToTypeElement.textContent; 
            const endTime = new Date();
            const timeTaken = (endTime - startTime) / 1000; 

            if (typedText.length < originalText.length && typedText !== originalText) {
                 updateElementText(statusElement, 'أكمل النص أولاً ثم اضغط تحقق.');
                 playSound('snd-lose');
                 return;
            }

            let errors = 0;
            for (let i = 0; i < originalText.length; i++) {
                if (i >= typedText.length || typedText[i] !== originalText[i]) {
                    errors++;
                }
            }
            if (typedText.length > originalText.length) { 
                errors += (typedText.length - originalText.length);
            }

            const words = originalText.split(/\s+/).filter(Boolean).length;
            const wpm = timeTaken > 0 ? Math.round((words / timeTaken) * 60) : 0;
            const accuracy = originalText.length > 0 ? Math.round(((originalText.length - errors) / originalText.length) * 100) : 0;
            
            updateElementText(statusElement, `الوقت: ${timeTaken.toFixed(1)} ثانية, السرعة: ${wpm} ك/د, الدقة: ${Math.max(0, accuracy)}%, الأخطاء: ${errors}`);
            playSound(accuracy >= 80 ? 'snd-win' : 'snd-lose');
            showHideElement(startButton, true);
            disableElement(inputField, true);
            disableElement(submitButton, true);
        };
        if(startButton) startButton.addEventListener('click', startGame);
        if(submitButton) submitButton.addEventListener('click', checkTyping);
        if(statusElement) updateElementText(statusElement, 'اضغط "ابدأ الاختبار"');
      };

      initXOGame(); 
      initRPSGame(); 
      initClickTargetGame(); 
      initReactionTestGame(); 
      initDiceRollGame(); 
      initMemoryGame(); 
      initMathQuizGame(); 
      initGuessNumberGame(); 
      initBigSmallGame(); 
      initTypingTestGame();

      showSectionByHash(); 
    });
  </script>
</body>
</html>
